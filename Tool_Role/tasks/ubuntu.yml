- name: Install MySQL dependencies on Ubuntu
  apt:
    name:
      - libaio1
      - libnuma1
      - libtinfo6  # Use libtinfo6 for Ubuntu 22.04

- name: Create symbolic link for libncurses.so.5
  command: ln -s /lib/x86_64-linux-gnu/libncurses.so.6 /lib/x86_64-linux-gnu/libncurses.so.5
  become: yes
  args:
    creates: /lib/x86_64-linux-gnu/libncurses.so.5

- name: Create symbolic link for libtinfo.so.5
  command: ln -s /lib/x86_64-linux-gnu/libtinfo.so.6 /lib/x86_64-linux-gnu/libtinfo.so.5
  become: yes
  args:
    creates: /lib/x86_64-linux-gnu/libtinfo.so.5

- name: Update dynamic linker cache
  command: ldconfig
  become: yes

- name: Debug Information
  debug:
    msg: "MySQL Install Directory: {{ mysql_install_dir }}"

- name: Check MySQL version
  command: "/usr/local/mysql/mysql-5.7.44-linux-glibc2.12-x86_64/bin/mysql --version"
  register: mysql_version_output

- name: Display MySQL version
  debug:
    var: mysql_version_output.stdout_lines
